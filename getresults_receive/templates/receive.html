{% extends "base_dashboard.html" %} 
{% block section_headers %}
    <!--Batch Button-->
     <button name="receive_batch" type="button" class="btn btn-primary btn-sm" id="receive_batch_button" data-toggle="modal" data-target="#batchModal">
      Batch Preset  
    </button>
          
    <!--Batch Modal -->
    <div class="modal fade" id="batchModal" tabindex="-1" role="dialog" aria-labelledby="batchModalLabel" aria-hidden="true">
       <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="batchModalLabel">Batch Preset Form</h4>
            </div>
            
            <div class="modal-body">
            <form class="form-inline" enctype="multipart/form-data" action={% url 'batch_preset' %} method='post'> 
            	{% csrf_token %}
	            <div class="row form-inline" id="row_inline_1">
					<div class="form-group">
						<label for="number_samples"></label>
						<input type="text" class="form-control" id="number_samples_input" name="number_samples" placeholder="Number of Samples">
					</div>
					<div class="form-group">
						<label for="collection_date"></label>
						<input type="text" class="form-control" id="collection_date_input" name="collection_date" placeholder="Collection Date">
					</div>
					<div class="form-group">
						<label for="sample_type"></label>
						<input type="text" class="form-control" id="sample_type_input" name="sample_type" placeholder="Sample Type">
					</div>
					<div class="form-group">
						<label for="protocol_number"></label>
						<input type="text" class="form-control" id="protocol_number_input" name="protocol_number" placeholder="Protocol Number">
					</div>
					<div class="form-group">
						<label for="protocol_number"></label>
						<input type="text" class="form-control" id="site_code_input" name="site_code" placeholder="Site Code">
					</div>
			  	</div>			  	
              	<div class="modal-footer">
                	<button type="submit" class="btn btn-primary" value="submit" name="submit" id="submit_batch_preset">Submit</button>
              	</div>
          </form>
          </div> <!--end batchmodal form-->                    
         </div>
      </div>
    </div>
{% endblock %}
{% block content %}
    <h2 class="sub-header">{{section_head}}</h2>
	<form class="form-inline" enctype="multipart/form-data">
		{% for index in batch_size %}
        	{% csrf_token %}
                <div class="row form-inline" id="row_inline_2">
                    <div class="checkbox"></label><input type="checkbox"></div>
                      <div class="form-group">
                        <label for="patient_id"></label>
                        <input type="text" class="form-control" id="patient_id" name="patient_id" placeholder="Patient Identifier">
                      </div>
                      <div class="form-group">
                        <label for="collect_datetime"></label>
                        <input type="datetime" class="form-control" id="collect_datetime" name="collect_datetime" placeholder="Colletion Datetime">
                      </div>
                      <div class="form-group">
                        <label for="rec_datetime"></label>
                        <input type="datetime" class="form-control" id="rec_datetime" name="rec_datetime" placeholder="Receive Datetime">
                      </div>
                      <div class="form-group">
                        <label for="sample_type"></label>
                        <input type="text" class="form-control" id="sample_type" name="sample_type" placeholder="Sample Type">
                      </div>
                      <div class="form-group">
                        <label for="protocol_no"></label>
                        <input type="text" class="form-control" id="protocol_no" name="protocol_no" placeholder="Protocol Number">
                      </div>
                      <div class="checkbox"></label><input type="checkbox"></div>
              	</div>
          {% endfor %}
          </div>
          <div class="modal-footer">
	        <button type="button" class="btn btn-primary" name="receive" id="park_button">Park</button>
	        <button type="button" class="btn btn-primary" name="receive_all" id="submit_button">Submit</button>
	      </div>
    </form>
    <script>
		$(document).ready(function(){
			$("#sample_type_input").keyup(function (){
				var value = $(this).val();
			    $('.form-control').each(function() {
			    	if ($(this).attr('id') == 'sample_type') {
			    		$(this).val(value);
			    	}
			    });
			});
			
			$("#protocol_number_input").keyup(function (){
				var value = $(this).val();
			    $('.form-control').each(function() {
			    	if ($(this).attr('id') == 'protocol_no') {
			    		$(this).val(value);
			    	}
			    });
			});
			
			$("#number_samples_input").keyup(function (){
				var value = $(this).val();
				var form_element_div = $('#dynamic_fields');
				var append_html= '<div class="checkbox"><label><input type="checkbox">\
				    </label><div class="form-group"><label for="patient_id"></label><input type="text" class="form-control" id="patient_id" name="patient_id" placeholder="Patient Identifier">\
					</div><div class="form-group"><label for="collect_datetime"></label><input type="text" class="form-control" id="collect_datetime" name="collect_datetime" placeholder="Colletion Datetime">\
					</div><div class="form-group"><label for="rec_datetime"></label><input type="text" class="form-control" id="rec_datetime" name="rec_datetime" placeholder="Receive Datetime">\
					</div><div class="form-group"><label for="sample_type"></label><input type="text" class="form-control" id="sample_type" name="sample_type" placeholder="Sample Type"></div>\
                    <div class="form-group"><label for="protocol_no"></label><input type="text" class="form-control" id="protocol_no" name="protocol_no" placeholder="Protocol Number"></div>\
                    <div class="checkbox"></label><input type="checkbox"></div>';
                form_element_div.children().remove();
                form_element_div.append(append_html);
				for (i = 0; i < value - 1; i++) {
					//if(value==1){
					//	return;
					//}
				    form_element_div.append(append_html);
				    form_element_div = $('#dynamic_fields');
				}    
			});
		});
	 </script>
{% endblock %}
